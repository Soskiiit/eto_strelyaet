<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Setup</title>
</head>
<style>
    .li {
    text-align: center;
    margin-left: 560px;
    margin-right: 560px;
}
</style>
<body style="background-color: #303030">
    <div class="li">
        <img src="{{url_for('static', filename='logo.jpg')}}" width="160px">
    </div>
    <div>
        <script>
            function defPosition(event) {
            var x = y = 0;
            var event = event || window.event;

            // Получаем координаты клика по странице, то есть абсолютные координаты клика.

            if (document.attachEvent != null) { // Internet Explorer & Opera
                x = window.event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
                y = window.event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
            } else if (!document.attachEvent && document.addEventListener) { // Gecko
                x = event.clientX + window.scrollX;
                y = event.clientY + window.scrollY;
            }

            //Определяем границы объекта, в нашем случае картинки.

            y0=document.getElementById("kartina").offsetTop;
            x0=document.getElementById("kartina").offsetLeft;

            // Пересчитываем координаты и выводим их алертом.

            x = x-x0;
            y = y-y0;

            const xhr = new XMLHttpRequest(),
            method = "GET",
            url = "{{ url_for('shoot') }}" + "er/" + x + "/" + y;
            xhr.open(method, url, true);
            xhr.onreadystatechange = function () {
              // In local files, status is 0 upon success in Mozilla Firefox
              if(xhr.readyState === XMLHttpRequest.DONE) {
                var status = xhr.status;
                if (status === 0 || (status >= 200 && status < 400)) {
                  // The request has been completed successfully
                  console.log(xhr.responseText);
                } else {
                  // Oh no! There has been an error with the request!
                }
              }
            };
            xhr.send();
        }
  </script>
        <p align="center"><img onclick="defPosition(event);" id='kartina'
                               style="display: block;-webkit-user-select: none;background-color: hsl(0, 0%, 25%)"
                               width="1280px" src="{{ url_for('video') }}"></p>
        <!--Тут блок с изображением с камеры и матрицей шоп тыкать в ручном режиме -->
    </div>
    <div>
        <!-- Тута кнопочки, ползунки снизу, доп инфа и подобная поебень -->
    </div>
</body>
</html>